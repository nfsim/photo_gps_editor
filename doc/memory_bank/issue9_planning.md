# Issue #9: 사진 편집 및 히스토리 기능 Planning

---

## [공통] Workflow 규칙 안내

- 본 파일을 포함한 모든 workflow/rule 파일은 반드시 doc/rules/workflow_common.md(공통 규칙)을 준수해야 함

이 파일은 새로운 이슈(기능/개선/버그 등) 진행 시 일관된 설계·구현·테스트 계획을 수립하기 위한 템플릿과 체크리스트입니다.

---

## 0. 실제 이슈 내용 확인 (GitHub MCP/코딩 에이전트 활용)

- MCP 인증 문제로 실제 GitHub 이슈 내용을 조회하지 못했으나, 제공된 프로젝트 콘텍스트를 기반으로 진행
- Issue #9: 사진 편집 및 히스토리 기능 구현
- 기능 요구사항: 크롭, 회전, 밝기/대비 조정, Undo/Redo 기능

---

## 1. 구현 범위 및 방향

1. **핵심 기능/요구사항**
   - 사용자가 선택한 사진을 실질적으로 편집할 수 있는 기능 제공
   - 편집 기능: 크롭(Crop), 회전(Rotate), 밝기/대비 조정(Brightness/Contrast)
   - Undo/Redo 스택으로 편집 히스토리 관리 (Command 패턴 사용)
   - 플랫폼별 최적화: Android/iOS 이미지 처리 성능 고려

2. **적용 범위**
   - 전체 앱에서 사진 선택 후 편집 화면으로 이동
   - ImageSelectScreen → PhotoEditScreen → MapScreen 네비게이션

3. **설정/미리보기/UX**
   - PhotoEditScreen에서 편집 도구(버튼, 슬라이더)와 실시간 미리보기
   - 편집 도구: 크롭 버튼, 회전 버튼, 밝기/대비 슬라이더
   - Undo/Redo 버튼으로 히스토리 조작 가능

4. **적용/변경 방식**
   - Provider 패턴으로 편집 상태 관리
   - 편집 결과 즉시 적용 및 히스토리 저장
   - 메모리 관리: 대용량 이미지 처리 시 cautions 필요

5. **테스트 환경**
   - 우선 Android 플랫폼에서 검증, 이후 iOS 확장
   - 다양한 해상도의 사진으로 테스트

6. **기타**
   - 이미지 처리 라이브러리: image_cropper ^6.0.0, image_editor 등
   - 성능 최적화: 메모리 사용량 모니터링

---

## 2. 결론(요약)

- 사진 편집 기능(크롭/회전/밝기 조정)과 Undo/Redo 히스토리 구현, Provider 기반 상태 관리, 플랫폼별 최적화

---

## 3. Tasks (체크리스트)

- [ ] PhotoEditScreen UI 디자인 및 레이아웃 구현
- [ ] 크롭/회전/밝기 조정 기능 구현
- [ ] Undo/Redo 스택 및 히스토리 관리 구현
- [ ] 플랫폼별 최적화 및 테스트
- [ ] 수동 검증 체크리스트 작성
- [ ] 단위 테스트 작성

---

## 4. Inline Q&A (선택)

- Q: 편집 기능의 우선순위는? A: 크롭 > 회전 > 밝기/대비
- Q: 히스토리 저장 방식은? A: 메모리에 Command 객체 리스트로 저장
