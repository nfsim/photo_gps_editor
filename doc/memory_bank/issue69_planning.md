## Issue #69: 지도 Long Press로 GPS 좌표 수동 설정 기능

### 🔍 **요구사항 분석**
- **지도 Long Press 이벤트**: 사용자가 지도를 길게 눌러 위치 선택
- **단일 마커 관리**: 지도상에 하나의 GPS 설정 마커만 표시
- **기존 마커 제거 로직**: 새 마커 생성 시 기존 GPS 마커 자동 제거
- **GPS 좌표 설정**: 선택한 위치를 현재 사진의 GPS 정보로 활용

### 🎯 **기술적 접근**
- Google Maps `onLongPress` 콜백 활용
- Marker 생성/제거 상태 관리
- 좌표 저장 및 UI 피드백 제공
- 기존 사진 선택 마커와 구분된 시각적 스타일

### 🔄 **현재 상태**
- MapScreen 기초 구조 완료
- PhotoProvider는 설정 좌표 관리 가능
- Marker 생성/제거 로직 구현 필요

## 🚀 **다음 단계 진행**
Issue #69 워크플로우를 따라서 구현을 진행하겠습니다:
1. 요구사항 분석 (GitHub Issue #69 확인)
2. 설계 및 구조화
3. 구현 (Long Press marker 생성)
4. 테스트 작성 및 실행
5. 코드 분석 및 정적 분석
6. 커밋 및 PR 생성

## ✅ **완료 조건**
- [x] 지도에서 Long Press 시 마커 생성
- [x] 지도상에 하나의 GPS 마커만 표시
- [x] 새로운 마커 생성 시 기존 GPS 마커 제거
- [x] 선택된 좌표를 사진 GPS 정보로 설정 가능
- [x] UI 피드백 제공 (마커 선택/해제 알림)

---

이 틀을 복사하여 새로운 이슈의 planning.md 파일에 활용하세요.

---

## 1. 구현 범위 및 방향

1. **핵심 기능/요구사항**
   - 지도 Long Press로 GPS 마커 생성 가능
   - 마커는 하나만 유지되며 새로 생성 시 기존 마커 제거
   - 선택된 좌표를 PhotoProvider를 통해 GPS 정보로 설정
   - 기존 사진 마커와 다른 시각적 스타일 (주황색)

2. **적용 범위**
   - MapScreen 위젯 내 GoogleMap 위젯에 적용
   - Marker 관리 로직 추가
   - PhotoProvider GPS 설정 기능 활용

3. **설정/미리보기/UX**
   - Long Press 시 마커 생성 및 피드백 SnackBar 표시
   - 마커 터치 시 좌표 해제 가능
   - 기존 사진 마커와 구분된 주황색 마커

4. **적용/변경 방식**
   - 새로운 GPS 마커 ID: 'manual_gps_marker'로 구분
   - 상태 관리: _manualGpsMarker 변수 추가
   - 즉시 적용, 재시작 필요 없음

5. **테스트 환경**
   - Android/iOS 시뮬레이터에서 테스트
   - 실제 디바이스에서 터치 이벤트 확인
   - GPS 권한 및 지도 표시 기능 확인

6. **기타**
   - 기존 코드와의 호환성 유지
   - 성능 최적화: 마커 추가/제거 시 불필요한 리렌더링 방지

---

## 2. 결론(요약)
- 지도 Long Press 기능을 통해 사용자가 자유롭게 GPS 좌표를 수동 설정할 수 있도록 구현
- 단일 마커 관리로 UI 복잡도 감소
- 기존 GPS 기능과 완벽 통합

---

## 3. Tasks (체크리스트)
- [x] 요구사항 분석 (GitHub Issue #69 확인 완료)
- [x] 설계 및 구조화 완료
- [x] MapScreen에 Long Press 핸들러 추가
- [x] GPS 마커 생성/제거 로직 구현
- [x] 마커 터치로 좌표 해제 기능 추가
- [x] UI 피드백 (SnackBar) 구현
- [x] PhotoProvider 통합 테스트 (기존 테스트 모두 통과)
- [x] 전체 기능 테스트 및 실행 (MapScreen 위젯 테스트 포함)
- [x] 코드 분석 및 정적 분석 (flutter analyze 통과)
- [x] 커밋 및 PR 생성 완료 (PR #71)

---

## 4. Inline Q&A (선택)
- **Q: GPS 마커와 사진 마커가 충돌하지 않나?**
  - A: 서로 다른 MarkerId 사용으로 구분되며, 시각적으로 색상으로 구분함

- **Q: Long Press 감지 민감도는 어떻게 조정?**
  - A: google_maps_flutter 기본 설정 사용, 별도 민감도 조정 없음
